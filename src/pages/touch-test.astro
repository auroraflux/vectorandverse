---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';

// Sample image for testing lightbox
const testImage = '/images/blog/013-lost-in-translation/lost-translation.webp';
---

<Layout title="Touch Interaction Test" description="Test page for mobile touch interactions">
  <Header variant="minimal" />
  
  <main id="main-content" class="max-w-4xl mx-auto px-6 pt-24 pb-16">
    <h1 class="text-4xl md:text-5xl mb-8 font-weight-850">Touch Interaction Test</h1>
    
    <div class="prose prose-lg max-w-none">
      <p class="text-xl text-gray-600 mb-8">
        This page tests all the mobile touch improvements implemented.
      </p>
      
      <h2 class="text-2xl mt-12 mb-6 font-weight-850">1. Touch Feedback on Cards</h2>
      <p>Tap the card below to see the ripple effect and active state:</p>
      
      <div class="not-prose mt-6 mb-12">
        <article class="group relative touch-card">
          <a href="#" class="block relative overflow-hidden h-[300px] no-underline rounded-[8px] touch-ripple touch-no-select bg-gradient-to-br from-indigo-600 to-purple-600">
            <div class="relative z-10 h-full p-8 flex flex-col justify-end">
              <h3 class="text-2xl text-white font-weight-850">Sample Article Card</h3>
              <p class="text-white/80 mt-2">Tap me to see touch feedback</p>
            </div>
          </a>
        </article>
      </div>
      
      <h2 class="text-2xl mt-12 mb-6 font-weight-850">2. Enhanced Lightbox</h2>
      <p>Tap the image below to open the lightbox, then:</p>
      <ul>
        <li>Swipe down to close</li>
        <li>Pinch to zoom (on supported devices)</li>
        <li>Double-tap to zoom</li>
      </ul>
      
      <div class="not-prose mt-6 mb-12">
        <img 
          src={testImage}
          alt="Test image for lightbox functionality"
          loading="eager"
          class="w-full h-auto rounded-lg cursor-zoom-in"
          data-lightbox="true"
          data-full-src={testImage}
        />
      </div>
      
      <h2 class="text-2xl mt-12 mb-6 font-weight-850">3. Touch-Friendly Navigation</h2>
      <p>Navigation elements have larger touch targets (44x44px minimum):</p>
      
      <div class="not-prose mt-6 mb-12 flex gap-4 items-center">
        <a href="#" class="touch-target touch-focus bg-gray-100 hover:bg-gray-200 rounded-lg px-4 py-2 text-gray-700 font-weight-500">
          Touch Target 1
        </a>
        <a href="#" class="touch-target touch-focus bg-gray-100 hover:bg-gray-200 rounded-lg px-4 py-2 text-gray-700 font-weight-500">
          Touch Target 2
        </a>
      </div>
      
      <h2 class="text-2xl mt-12 mb-6 font-weight-850">4. Swipe Navigation</h2>
      <p class="mb-6">On blog posts, you can:</p>
      <ul class="mb-6">
        <li>Swipe left to go to the next article</li>
        <li>Swipe right to go to the previous article</li>
      </ul>
      <p class="text-sm text-gray-600">
        Note: This feature is only active on actual blog post pages, not this test page.
      </p>
      
      <h2 class="text-2xl mt-12 mb-6 font-weight-850">5. Improved Focus States</h2>
      <p>Tab through these buttons to see the touch-optimized focus indicators:</p>
      
      <div class="not-prose mt-6 mb-12 flex gap-4 flex-wrap">
        <button class="touch-focus bg-black text-white px-6 py-3 rounded-lg font-weight-500">
          Focus Me 1
        </button>
        <button class="touch-focus bg-black text-white px-6 py-3 rounded-lg font-weight-500">
          Focus Me 2
        </button>
        <button class="touch-focus bg-black text-white px-6 py-3 rounded-lg font-weight-500">
          Focus Me 3
        </button>
      </div>
      
      <h2 class="text-2xl mt-12 mb-6 font-weight-850">Device Information</h2>
      <div class="not-prose bg-gray-50 p-6 rounded-lg">
        <dl class="space-y-2">
          <div>
            <dt class="inline font-weight-600">Touch Support:</dt>
            <dd class="inline ml-2" id="touch-support">Checking...</dd>
          </div>
          <div>
            <dt class="inline font-weight-600">Pointer Type:</dt>
            <dd class="inline ml-2" id="pointer-type">Checking...</dd>
          </div>
          <div>
            <dt class="inline font-weight-600">Viewport Size:</dt>
            <dd class="inline ml-2" id="viewport-size">Checking...</dd>
          </div>
        </dl>
      </div>
    </div>
  </main>
</Layout>

<script>
  // Display device information
  document.addEventListener('DOMContentLoaded', () => {
    const touchSupport = document.getElementById('touch-support');
    const pointerType = document.getElementById('pointer-type');
    const viewportSize = document.getElementById('viewport-size');
    
    if (touchSupport) {
      touchSupport.textContent = 'ontouchstart' in window ? 'Yes' : 'No';
    }
    
    if (pointerType) {
      const coarse = window.matchMedia('(pointer: coarse)').matches;
      const fine = window.matchMedia('(pointer: fine)').matches;
      pointerType.textContent = coarse ? 'Coarse (Touch)' : fine ? 'Fine (Mouse)' : 'Unknown';
    }
    
    if (viewportSize) {
      const updateSize = () => {
        viewportSize.textContent = `${window.innerWidth} Ã— ${window.innerHeight}`;
      };
      updateSize();
      window.addEventListener('resize', updateSize);
    }
  });
</script>