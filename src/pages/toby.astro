---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import GradientBorders from '../components/GradientBorders.astro';
import { BRAND_CONFIG } from '../lib/config';

const title = "Toby Updates";
const description = "Health updates for our little fighter";
---

<Layout title={`${title} - ${BRAND_CONFIG.name}`} description={description}>
  <Header variant="minimal" />
  <GradientBorders />
  <div class="fade-in relative">
    {/* Animated grid background that matches the homepage */}
    <div class="fixed inset-0 -z-10">
      <div class="absolute inset-0 bg-gray-50"></div>
      <div class="absolute inset-0 bg-grid-pattern opacity-40"></div>
      {/* Moving gradient overlay - subtle variant for content pages */}
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-gradient-animated-subtle"></div>
      </div>
    </div>
    <main id="main-content" class="max-w-4xl mx-auto px-6 pt-24 pb-24">
      {/* Header */}
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl mb-4 font-weight-850">
          {title}
        </h1>
        <p class="text-xl text-gray-600 font-weight-500">
          {description}
        </p>
        
        
        <div class="mt-6 text-center">
          <img src="/images/blog/013-toby/toby4.png" 
               alt="Toby" 
               class="w-64 h-64 rounded-full object-cover mx-auto mb-4 shadow-sm" 
               loading="eager" />
        </div>
      </div>


      {/* 
        FINAL UPDATE SECTION
        Lymphoma diagnosis and treatment decision
      */}
      
      <div class="space-y-8">
        <h2 class="text-3xl font-weight-850 text-gray-800 mb-8 text-center">
          Final Update
        </h2>

        <div class="bg-white p-8 rounded-xl shadow-sm border border-gray-200">
          <div class="mb-6 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
            <p class="text-blue-800 font-weight-600">
              <strong class="font-weight-700">Monday, September 8th</strong> - We finally have answers, and we've made our choice.
            </p>
          </div>
          
          <div class="prose prose-lg max-w-none text-gray-700 font-weight-500 leading-relaxed space-y-6">
            <p>
              Thank you all again for the incredible support you've shown Toby. After days of uncertainty, consultations with specialists, and a lot of difficult conversations, I finally have a definitive answer. <strong class="font-weight-900">Toby has been diagnosed with high-grade Lymphoma, a cancer of the blood.</strong> This diagnosis, while devastating, finally explains the cascade of issues he's been battling, from the liver failure to the pancreatitis.
            </p>

            <p>
              This is not the end of his story. After a long and emotional discussion with the oncology team and my family, I've made the decision to fight. <strong class="font-weight-700">Today, Monday, September 8th, Toby started his first round of chemotherapy.</strong> I am under no illusions about what this means. This is not a cure, but a fight for a significant period of good, happy, high-quality time.
            </p>

            <p>
              The daily updates on this page were a lifeline for me during the diagnostic whirlwind, but that phase is now over. The road ahead requires my complete focus, in private. I'll probably add updates less frequently now. I need to shift all my energy from reporting on the battle to simply fighting it.
            </p>

            <p class="text-lg font-weight-900">
              Thank you, from the bottom of my heart, for rooting for my little guy. Your support has meant the world.
            </p>
          </div>
        </div>
    </main>
  </div>
</Layout>

<style>
  @import "tailwindcss";
  @reference;
  
  @keyframes pulse-gentle {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.7);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.05);
      box-shadow: 0 0 0 8px rgba(251, 191, 36, 0);
    }
  }

  .animate-pulse-gentle {
    animation: pulse-gentle 2s infinite;
  }

  /* Mobile responsive timeline classes */
  @media (max-width: 640px) {
    .timeline-entry {
      flex-direction: column;
      align-items: flex-start;
    }
    
    .timeline-day-circle {
      align-self: flex-start;
      margin-bottom: 1rem;
    }
    
    .timeline-content {
      margin-left: 0 !important;
      width: 100%;
    }
  }

  /* Header scroll behavior */
  header {
    backdrop-filter: blur(10px);
    background-color: rgba(249, 250, 251, 0.9);
  }
  
  .header-hidden {
    transform: translateY(-100%);
    transition: transform 0.3s ease-in-out;
  }
  
  .header-visible {
    transform: translateY(0);
    transition: transform 0.3s ease-in-out;
  }
</style>

<script>
  // Header hide on scroll functionality
  let lastScrollTop = 0;
  const header = document.querySelector('header');
  
  // Add backdrop blur to header for this page
  if (header) {
    header.style.backdropFilter = 'blur(10px)';
    header.style.backgroundColor = 'rgba(249, 250, 251, 0.9)';
  }
  
  window.addEventListener('scroll', () => {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
    if (scrollTop > lastScrollTop && scrollTop > 150) {
      // Scrolling down - hide header
      header?.classList.add('header-hidden');
      header?.classList.remove('header-visible');
    } else if (scrollTop < lastScrollTop) {
      // Scrolling up - show header
      header?.classList.add('header-visible');
      header?.classList.remove('header-hidden');
    }
    
    lastScrollTop = scrollTop;
  });
</script>
