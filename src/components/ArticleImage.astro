---
import ResponsiveImage from './ResponsiveImage.astro';

export interface Props {
  src: string;
  alt: string;
  caption?: string;
}

const { src, alt, caption } = Astro.props;

// Import the image dynamically
const images = import.meta.glob<{ default: ImageMetadata }>('/src/content/blog/images/*');
const imagePath = `/src/content/blog/images/${src}`;

if (!images[imagePath]) {
  throw new Error(`Image not found: ${src}`);
}

const imageModule = await images[imagePath]();
const image = imageModule.default;
---

<ResponsiveImage 
  src={image} 
  alt={alt} 
  caption={caption}
  type="inline"
  loading="lazy"
/>