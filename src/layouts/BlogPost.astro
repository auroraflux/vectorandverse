---
import Layout from './Layout.astro';
import ResponsiveImage from '../components/ResponsiveImage.astro';
import '../styles/global.css';

export interface Props {
  title: string;
  description: string;
  date: Date;
  heroImage?: ImageMetadata;
  heroImageAlt?: string;
}

const { title, description, date, heroImage, heroImageAlt } = Astro.props;
const formattedDate = new Intl.DateTimeFormat('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
}).format(date);
---

<Layout title={title} description={description}>
  <div class="fade-in">
    {heroImage && (
      <div class="w-full h-96 md:h-[32rem] relative overflow-hidden">
        <ResponsiveImage 
          src={heroImage} 
          alt={heroImageAlt || title}
          type="hero"
          loading="eager"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>
      </div>
    )}
    
    <header class={`max-w-3xl mx-auto px-6 ${heroImage ? 'pt-8' : 'pt-16'} pb-8`}>
      <a href="/" class="inline-block text-gray-600 hover:text-gray-900 transition-colors mb-8">
        ‚Üê Back
      </a>
      <h1 class="text-4xl md:text-5xl tracking-tight mb-4" style="font-weight: 850;">
        {title}
      </h1>
      <p class="text-xl text-gray-600 mb-4" style="font-weight: 500;">
        {description}
      </p>
      <time class="text-base text-gray-500" style="font-weight: 500;">
        {formattedDate}
      </time>
    </header>
    
    <article class="max-w-3xl mx-auto px-6 pb-24">
      <div class="prose prose-lg max-w-none">
        <slot />
      </div>
    </article>
  </div>
</Layout>

<style>
  @import "tailwindcss";
  @reference;
  
  article :global(h2) {
    @apply text-3xl mt-12 mb-4 lowercase;
    font-weight: 850 !important;
    font-variation-settings: 'wght' 850 !important;
  }
  
  article :global(h2::after) {
    content: '';
    display: block;
    height: 2px;
    margin-top: 0.5rem;
    background: linear-gradient(to right, rgb(209, 213, 219), transparent);
  }
  
  article :global(h3) {
    @apply text-2xl mt-8 mb-3 lowercase;
    font-weight: 850 !important;
    font-variation-settings: 'wght' 850 !important;
  }
  
  article :global(h3::after) {
    content: '';
    display: block;
    height: 2px;
    margin-top: 0.5rem;
    background: linear-gradient(to right, rgb(209, 213, 219), transparent);
  }
  
  article :global(p) {
    @apply mb-6 leading-relaxed;
  }
  
  article :global(blockquote) {
    @apply pl-6 my-8 border-l-3 border-gray-300 text-gray-700;
  }
  
  article :global(blockquote p) {
    @apply mb-2;
  }
  
  article :global(pre) {
    @apply bg-gray-50 border border-gray-200 p-4 overflow-x-auto my-6 text-sm;
  }
  
  article :global(code) {
    @apply bg-gray-100 px-1 py-0.5 rounded text-sm;
  }
  
  article :global(pre code) {
    @apply bg-transparent p-0;
  }
  
  article :global(ul) {
    @apply list-disc pl-6 my-6;
  }
  
  article :global(ol) {
    @apply list-decimal pl-6 my-6;
  }
  
  article :global(li) {
    @apply mb-2;
  }
  
  article :global(table) {
    @apply w-full my-8 text-base;
  }
  
  article :global(thead) {
    @apply border-b-2 border-gray-200;
  }
  
  article :global(th) {
    @apply font-semibold text-left px-3 py-3;
  }
  
  article :global(td) {
    @apply px-3 py-3;
  }
  
  article :global(tbody tr) {
    @apply border-b border-gray-100;
  }
  
  article :global(tbody tr:last-child) {
    @apply border-b-0;
  }
  
  article :global(tbody td:first-child) {
    @apply font-medium;
  }
</style>